<div class="users-wrapper">
  <%= render partial:'shared/menu',locals:{menu: @menu_number} %>

<div class="today-ranking">
<% n = 0 %>
<div class="ranks-wrapper">
  <p class="rank-title">今日のランキング</p>
  <% @all_ranks.each_with_index do |f, i|%>
    <div class="ranks">
      <% if (n+1) <= 3 %>
        <div class="rank-icon"></div>
      <% else %>
         <p class="kuuhaku"></p>
      <% end %>
      <p class="rank"> <%= "#{n+1}位"%> </p>
      <p class="name"><%= link_to f.name,user_path(f),class:"rank-name"%></p>
      <p class="time"><%= f.studies.find_by(date: Time.current.strftime("%Y年%m月%d日")).count_time %> </p>
    </div>
      <% if @all_ranks[i+1] %>
        <% unless @all_ranks[i].studies.find_by(date: Time.current.strftime("%Y年%m月%d日")).count == @all_ranks[i+1].studies.find_by(date: Time.current.strftime("%Y年%m月%d日")).count %>
          <% n += 1 %>
        <% end %>
      <% end %>
   <% end %>
</div>
</div>

<div class="month-ranking">

<% n = 0 %>
<div class="ranks-wrapper">
  <p class="rank-title">今月のランキング</p>
  <% @all_ranks_month.each_with_index do |f, i|%>
    <div class="ranks">
      <% if (n+1) <= 3 %>
        <div class="rank-icon"></div>
      <% else %>
        <h2 class="kuuhaku"></h2>
      <% end %>
        <p class="rank"> <%= "#{n+1}位"%> </p>
        <p class="name"><%= f.name%></p>
        <p class="time"><%= f.months.find_by(month: Time.current.strftime("%Y年%m月")).count_time %> </p>

    </div>
      <% if @all_ranks_month[i+1] %>
        <% unless @all_ranks_month[i].month.find_by(month: Time.current.strftime("%Y年%m月")).time_count == @all_ranks_month[i+1].months.find_by(month: Time.current.strftime("%Y年%m月")).time_count %>
          <% n += 1 %>
        <% end %>
      <% end %>
   <% end %>
</div>
</div>
</div>
